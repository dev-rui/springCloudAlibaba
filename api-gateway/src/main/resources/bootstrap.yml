server:
  port: 8003


spring:
  application:
          name: api-gateway

  cloud:
    # Nacos 作为注册中心的配置项
    nacos:
      discovery:
        server-addr: 192.168.36.129:8848 # Nacos 服务器地址
    # Nacos Config 配置项，对应 NacosConfigProperties 配置属性类
      config:
        server-addr: 192.168.36.129:8848 # Nacos 服务器地址
        group: DEFAULT_GROUP # 使用的 Nacos 配置分组，默认为 DEFAULT_GROUP
        file-extension: yaml # 使用的 Nacos 配置集的 dataId 的文件拓展名，同时也是 Nacos 配置集的配置格式，默认为 properties
    #sentinel容错降级
    sentinel:
      eager: true # 是否饥饿加载。默认为 false 关闭
      transport:
        dashboard: 192.168.36.129:8858 # 是否饥饿加载。默认为 false 关闭
      # Sentinel 对 Spring Cloud Gateway 的专属配置项，对应 SentinelGatewayProperties 类
      scg:
        order: -2147483648 # 过滤器顺序，默认为 -2147483648 最高优先级
        fallback:
          mode: # fallback 模式，目前有三种：response、redirect、空
          # 专属 response 模式
          response-status: 429 # 响应状态码，默认为 429
          response-body: 你被 block 了... # 响应内容，默认为空
          content-type: application/json # 内容类型，默认为 application/json
          # 专属 redirect 模式
          redirect: http://www.baidu.com

  redis:
    host: 192.168.36.130
    port: 6379

management:
  endpoints:
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      show-details: always
#logging:
#  level:
#    org.springframework:
#          cloud.gateway: debug
    # Spring Cloud Gateway 配置项，对应 GatewayProperties 类
#    gateway:
      # 路由配置项，对应 RouteDefinition 数组
#      routes:
        # 路由的编号
#       - id: baidu
         # 路由到的目标地址
#         uri: https://www.baidu.com/
         # 断言，作为路由的匹配条件，对应 RouteDefinition 数组
#         predicates:
#           - Path=/baidu
         # 断言，作为路由的匹配条件，对应 RouteDefinition 数组
#         filters:
#            - StripPrefix=1

#       - id: ReactiveCompositeDiscoveryClient_discovery-client
#         uri: lb://discovery-client
#         predicates:
#           - Path= /discovery-client/**
#         filters:
#           - RewritePath=/discovery-client/(?<remaining>.*), /${remaining} # 将 /order-service 前缀剔除
      # 与 Spring Cloud 注册中心的集成，对应 DiscoveryLocatorProperties 类
#      discovery:
#        locator:
#          enabled: true # 是否开启，默认为 false 关闭
#          url-expression: "'lb://' + serviceId" # 路由的目标地址的表达式，默认为 "'lb://' + serviceId"

